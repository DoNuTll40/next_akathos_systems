"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9642],{28553:(e,t,a)=>{a.d(t,{A:()=>c,h:()=>u});var s=a(95155),n=a(42414),r=a(35695),l=a(12115),o=a(95799);let i=(0,l.createContext)();function u(e){let{children:t}=e,[a,u]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),[h,m]=(0,l.useState)(!0),[p,g]=(0,l.useState)(null),[f,x]=(0,l.useState)(null),[v,b]=(0,l.useState)({username:"",password:""}),j=(0,r.useRouter)();(0,l.useEffect)(()=>{x(localStorage.getItem("token")),y()},[]);let k=async()=>await n.A.post("auth/authLogin",v),y=async()=>{var e,t;m(!0);let a=localStorage.getItem("token");if(x(a),!a)return m(!1);try{let t=await n.A.post("/auth/authVerifyToken",{},{headers:{Authorization:"Bearer ".concat(a)}});200===t.status&&(g(t.data.data),localStorage.setItem("isAuthen",JSON.stringify(null===(e=t.data)||void 0===e?void 0:e.data)))}catch(e){o.oR.error(null===(t=e.response)||void 0===t?void 0:t.data.message),localStorage.removeItem("token"),localStorage.removeItem("isAuthen"),g(null)}finally{m(!1)}},A=async()=>{var e,t;m(!0);try{let t=await n.A.post("/auth/authLogout",{},{headers:{Authorization:"Bearer ".concat(f)}});200===t.status&&(o.oR.success(null===(e=t.data)||void 0===e?void 0:e.message),localStorage.removeItem("token"),localStorage.removeItem("isAuthen"),j.push("/admin/login"),x(null),g(null))}catch(e){o.oR.error(null===(t=e.response)||void 0===t?void 0:t.data.message)}finally{m(!1)}};return(0,s.jsx)(i.Provider,{value:{inputLogin:v,setInputLogin:b,showModalOtp:a,setShowModalOtp:u,login:k,verify:y,logout:A,user:p,loading:h,setLoading:m,setToken:x,errMsg:c,setErrMsg:d},children:t})}let c=i},30585:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(82559),n=a(12115);function r(){return(0,n.useContext)(s.Ay)}},42414:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(23464);s.A.defaults.baseURL="https://akathos.moph.go.th/akatApi/";let n=s.A},73014:(e,t,a)=>{a.d(t,{default:()=>j});var s=a(95155),n=a(30585),r=a(57340),l=a(79772),o=a(73783),i=a(26661),u=a(381),c=a(58071),d=a(46827),h=a(32919),m=a(50430),p=a(66474),g=a(13052),f=a(6874),x=a.n(f),v=a(35695),b=a(12115);function j(){let{isOpen:e,isMini:t,toggleMini:a}=(0,n.A)(),[f,j]=(0,b.useState)(!1),[k,y]=(0,b.useState)(null),[A,w]=(0,b.useState)(null);(0,v.useRouter)();let N=(0,v.usePathname)(),S=[{icon:(0,s.jsx)(r.A,{size:22,strokeWidth:1}),name:"หน้าหลัก",path:"/admin",title:"หน้าแรก"},{icon:(0,s.jsx)(l.A,{size:22,strokeWidth:1}),name:"หน้าต่างผู้ใช้งาน",path:"/user",title:"หน้าผู้ใช้ทั่วไป"},{icon:(0,s.jsx)(o.A,{size:22,strokeWidth:1}),name:"Dashboard",path:"/admin/dashboard",title:"แดชบอร์ด",submenu:[]},{icon:(0,s.jsx)(i.A,{size:22,strokeWidth:1}),name:"รายการลงเวลา",path:"/admin/attendance",title:"แดชบอร์ด",submenu:[{name:"ข้อมูลลงเวลา เข้า-ออก",path:"/admin/attendance/attendance-record"}]},{icon:(0,s.jsx)(u.A,{size:22,strokeWidth:1}),name:"การตั้งค่า",path:"/admin/settings",title:"การตั้งค่า",submenu:[{name:"ข้อมูลชื่อสถานะเข้างาน",path:"/admin/settings/checkin"},{name:"ข้อมูลชื่อสถานะออกงาน",path:"/admin/settings/checkout"},{name:"บันทึกการเช้างาน",path:"/admin/settings/shift"},{name:"ข้อมูลวันหยุด",path:"/admin/settings/holiday"}]}],z=[{icon:(0,s.jsx)(r.A,{size:22,strokeWidth:1}),name:"หน้าหลัก",path:"/user",title:"หน้าแรก"},{icon:(0,s.jsx)(c.A,{size:22,strokeWidth:1}),name:"ฟอร์ม",path:"/user/form",title:"ฟอร์ม",submenu:[{name:"ฟอร์ม IDP",path:"/user/form/ipd"},{name:"ฟอร์ม OPD",path:"/user/form/opd"},{name:"ฟอร์ม ER",path:"/user/form/er"}]},{icon:(0,s.jsx)(d.A,{size:22,strokeWidth:1}),name:"ผู้ดูแลระบบ",path:"/admin",title:"หน้าแอดมิน",status:"ADMIN",lock:(0,s.jsx)(h.A,{size:15,strokeWidth:1}),unLock:(0,s.jsx)(m.A,{size:15,strokeWidth:1})}],C={status:"ADMIN"};(0,b.useEffect)(()=>{w(window.location.pathname.split("/")[2])},[]),(0,b.useEffect)(()=>{{let e=localStorage.getItem("submenuOpen"),t=(null==A?void 0:A.toLowerCase())==="admin"?S:z,a=e?parseInt(e):null;t.forEach((e,t)=>{e.submenu&&e.submenu.some(e=>N.startsWith(e.path))&&(a=t)}),y(a)}},[N,A]),(0,b.useEffect)(()=>{null!==k?localStorage.setItem("submenuOpen",k.toString()):localStorage.removeItem("submenuOpen")},[k]);let I=e=>{y(k===e?null:e)},W=((null==A?void 0:A.toLowerCase())==="admin"?S:z).reduce((e,t)=>N.startsWith(t.path)&&t.path.length>e.path.length?t:e,{path:""}),E=e=>e.path===W.path;return(0,s.jsxs)("div",{className:"".concat(e?t?"min-w-14 max-w-14 ".concat(f?"min-w-65 max-w-65":""):"min-w-65 max-w-65":"min-w-0"," bg-white dark:bg-gray-800 dark:text-white hidden md:flex justify-between flex-col text-sm top-0 h-full left-0 transition-all duration-200 ease-in-out overflow-hidden"),onMouseEnter:()=>j(!0),onMouseLeave:()=>j(!1),children:[e&&(0,s.jsxs)("div",{className:"pt-2 ml-1 h-fit overflow-hidden flex flex-col w-64 select-none",children:[(0,s.jsx)("div",{className:"bg-white rounded-md ".concat(t&&!f?"max-w-[18%]":"")}),(0,s.jsx)("div",{className:"my-2 mb-0.5 flex flex-col gap-1.5 overflow-auto",children:((null==A?void 0:A.toLowerCase())==="admin"?S:z).map((e,a)=>(0,s.jsxs)("div",{children:[e.submenu?(0,s.jsxs)("button",{className:"flex w-full justify-between items-center gap-2 p-2 pl-3 rounded-l-full transition hover:cursor-pointer\n                      ".concat(E(e)&&!f&&t?"bg-gray-300":"hover:bg-gray-200 dark:hover:bg-gray-700"),onClick:e=>{e.preventDefault(),I(a)},children:[(0,s.jsxs)("div",{className:"flex gap-1.5",children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{className:"".concat(t&&!f&&"hidden"),children:e.name})]}),(0,s.jsx)(p.A,{className:"transform transition-all ease-in-out duration-300 ".concat(k===a?"-rotate-180":""),size:16,strokeWidth:1}),e.status&&(null==C?void 0:C.status)!==e.status?e.lock:e.unLock]}):(0,s.jsxs)(x(),{href:e.submenu?"":e.path,prefetch:!1,className:"flex justify-between items-center gap-2 p-2 pl-3 rounded-l-full transition \n                      ".concat(E(e)?"bg-gray-300":"hover:bg-gray-200 dark:hover:bg-gray-700"),onClick:t=>{e.submenu&&(t.preventDefault(),I(a))},children:[(0,s.jsxs)("div",{className:"flex gap-1.5",children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("span",{className:"".concat(t&&!f&&"hidden"),children:e.name})]},a),e.submenu&&(0,s.jsx)(p.A,{className:"transform transition-all ease-in-out duration-300 ".concat(k===a&&" -rotate-180"),size:16,strokeWidth:1}),e.status&&(null==C?void 0:C.status)!==e.status?e.lock:e.unLock]}),e.submenu&&k===a&&(!t||f)&&(0,s.jsx)("div",{className:"pl-4 not-dark:shadow-inner shadow-gray-200 rounded-tl-2xl",children:e.submenu.map((e,t)=>(0,s.jsx)(x(),{href:e.path,prefetch:!1,className:"flex items-center gap-2 p-2 my-0.5 pl-4 rounded-l-full transition\n                          ".concat(N===e.path?"bg-gray-300":"hover:bg-gray-200 dark:hover:bg-gray-700"),children:(0,s.jsxs)("span",{className:"flex items-center",children:["- ",e.name]})},t))})]},a))})]}),e&&(0,s.jsx)("div",{className:"w-full bg-gray-200 hover:bg-gray-300 dark:bg-gray-700 dark:hover:bg-gray-600 hover:cursor-pointer min-h-8 flex ".concat(t?f?"justify-end":"justify-center":"justify-end"),onClick:a,children:(0,s.jsx)("button",{className:"dark:text-white px-2 hover:cursor-pointer focus:outline-0","aria-label":t?"Expand sidebar":"Collapse sidebar",children:(0,s.jsx)(g.A,{size:16,className:"".concat(t?" rotate-0 ":" rotate-180 "," transition-all transform ease-in-out duration-500")})})})]})}},81726:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(28553),n=a(12115);function r(){return(0,n.useContext)(s.A)}},82559:(e,t,a)=>{a.d(t,{Ay:()=>o,dn:()=>l});var s=a(95155),n=a(12115);let r=(0,n.createContext)();function l(e){let{children:t}=e,[a,l]=(0,n.useState)(!0),[o,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=localStorage.getItem("miniBar"),t=localStorage.getItem("fullBar");null!==e&&i("true"===e),null!==t&&l("true"===t)},[]),(0,s.jsx)(r.Provider,{value:{isOpen:a,isMini:o,toggleSidebar:()=>{let e=!a;l(e),localStorage.setItem("fullBar",e)},toggleMini:()=>{let e=!o;i(e),localStorage.setItem("miniBar",e)}},children:t})}let o=r},82717:(e,t,a)=>{a.d(t,{default:()=>h});var s=a(95155),n=a(81726),r=a(30585),l=a(99110),o=a(28562),i=a(57842),u=a(34835),c=a(87325),d=a(56340);function h(){let{logout:e}=(0,n.A)(),{isOpen:t,toggleSidebar:a}=(0,r.A)(),h=[{key:"1",label:(0,s.jsx)("span",{onClick:()=>m("1"),children:"โปรไฟล์"}),icon:(0,s.jsx)(i.A,{size:15})},{key:"2",label:(0,s.jsx)("span",{onClick:()=>m("2"),children:"ออกจากระบบ"}),icon:(0,s.jsx)(u.A,{size:15}),danger:!0}],m=t=>{"1"===t?alert("ไปหน้าโปรไฟล์"):"2"===t&&e()};return(0,s.jsx)("div",{className:"border-b border-gray-300 py-2 bg-white select-none",children:(0,s.jsxs)("div",{className:"flex justify-between items-center mx-auto h-9 px-2",children:[(0,s.jsxs)("div",{className:"font-semibold text-md flex items-center gap-1",children:[(0,s.jsx)("button",{onClick:a,className:"p-4 rounded-lg hover:cursor-pointer",children:t?(0,s.jsx)(c.A,{size:20}):(0,s.jsx)(d.A,{size:20})}),(0,s.jsx)("p",{children:"ผู้ดูแลระบบ"})]}),(0,s.jsx)("div",{children:(0,s.jsx)(l.A,{menu:{items:h},trigger:["click"],getPopupContainer:e=>e.parentElement||document.body,className:"font-sans",children:(0,s.jsx)(o.A,{className:"hover:cursor-pointer shadow hover:opacity-80",src:"https://provider.id.th/assets/user-dbff659c.png",onClick:e=>e.preventDefault(),size:40})})})]})})}}}]);