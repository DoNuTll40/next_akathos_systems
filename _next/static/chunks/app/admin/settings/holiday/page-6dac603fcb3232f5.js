(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6885],{9099:(e,t,a)=>{Promise.resolve().then(a.bind(a,81593))},19946:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:n="",children:c,iconNode:h,...p}=e;return(0,r.createElement)("svg",{ref:t,...d,width:s,height:s,stroke:a,strokeWidth:i?24*Number(o)/Number(s):o,className:l("lucide",n),...p},[...h.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let a=(0,r.forwardRef)((a,d)=>{let{className:i,...n}=a;return(0,r.createElement)(o,{ref:d,iconNode:t,className:l("lucide-".concat(s(e)),i),...n})});return a.displayName="".concat(e),a}},42414:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(23464);r.A.defaults.baseURL="https://akathos.moph.go.th/akatApi/";let s=r.A},50142:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},57791:(e,t,a)=>{"use strict";a.d(t,{r:()=>l});var r=a(82940),s=a.n(r);let l=e=>s()(e).locale("th").add(543,"years").format("วันที่ DD/MM/YYYY เวลา HH:mm น.")},81593:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(95155),s=a(42414),l=a(57791),d=a(1584),o=a(36768),i=a(50142),n=a(84109),c=a(40592),h=a(12115),p=a(82940),m=a.n(p);function u(){let[e,t]=(0,h.useState)([]),[a,p]=(0,h.useState)([]),[u,y]=(0,h.useState)(!1),x=s.A.defaults.baseURL;(0,h.useEffect)(()=>{g()},[]);let g=async()=>{let e=localStorage.getItem("token");try{let a=await s.A.get("/setting/getHolidays",{headers:{Authorization:"Bearer ".concat(e)}});200===a.status&&t(a.data.data)}catch(e){console.log(e)}},f=e.map((e,t)=>({...e,index:t+1})),b=[{title:"ID",dataIndex:"index",sorter:(e,t)=>e.index-t.index,responsive:["md"],ellipsis:!0,width:"5rem"},{title:"วัน",dataIndex:"holiday_name",sorter:(e,t)=>e.holiday_name.localeCompare(t.holiday_name),ellipsis:!0},{title:"วันที่",dataIndex:"holiday_date",render:e=>m()(e).add("years",543).format("DD/MM/YYYY"),sorter:(e,t)=>e.holiday_date.localeCompare(t.holiday_date),ellipsis:!0},{title:"สร้างโดย",dataIndex:"created_by",responsive:["lg"],sorter:(e,t)=>e.created_by.localeCompare(t.created_by),ellipsis:!0},{title:"วันที่สร้าง",dataIndex:"created_at",render:e=>(0,l.r)(e),sorter:(e,t)=>e.created_at.localeCompare(t.created_at),ellipsis:!0},{title:"อัพเดทโดย",dataIndex:"updated_by",responsive:["lg"],sorter:(e,t)=>e.updated_by.localeCompare(t.updated_by),ellipsis:!0},{title:"วันที่อัพเดท",dataIndex:"updated_at",render:e=>(0,l.r)(e),sorter:(e,t)=>e.updated_at.localeCompare(t.updated_at),ellipsis:!0}],k=async()=>{let e=localStorage.getItem("token");p([]),y(!0);try{let t=(await fetch("".concat(x,"/setting/syncHolidays"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e),Accept:"text/event-stream"},body:JSON.stringify({key:"value"})})).body.getReader(),a=new TextDecoder,r="";for(;;){let e;let{value:s,done:l}=await t.read();if(l)break;r+=a.decode(s,{stream:!0}),r=r.replace(/data:\s*/g,"");let d=/(\{.*\})/g;for(;null!==(e=d.exec(r));)try{let t=JSON.parse(e[0].trim());t.progress&&("complete"===t.progress?(p(e=>[...e,"ซิ้งค์ข้อมูลสำเร็จ"]),g()):p(e=>[...e,t.progress]))}catch(e){console.error("Error parsing chunk:",e)}r=""}}catch(e){console.error("Error fetching SSE:",e)}finally{y(!1)}};return(0,r.jsxs)("div",{className:"bg-white p-4 rounded-xl select-none",children:[(0,r.jsx)("div",{className:"my-1 font-semibold pl-1.5 bg-blue-900 rounded-md shadow-sm",children:(0,r.jsxs)("h1",{className:"bg-blue-50 p-2 pl-3 text-blue-900 flex gap-2 items-center",children:[(0,r.jsx)(i.A,{size:20}),"ข้อมูลวันหยุดทั้งหมดที่มีในระบบ HosXP"]})}),(0,r.jsx)("div",{className:"flex justify-end my-1 p-2",children:(0,r.jsx)(c.Button,{className:"border py-1.5 px-4 rounded-md bg-blue-700 text-white disabled:opacity-40 disabled:cursor-not-allowed",disabled:u,onClick:()=>k(),label:(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)(n.A,{className:" ".concat(u&&"animate-spin"),strokeWidth:3,size:16})," ","ซิ้งค์ข้อมูล"]})})}),a.length>0&&(0,r.jsxs)("div",{className:"flex gap-2 my-2",children:[(0,r.jsx)("h3",{children:"สถานะการซิ้งค์ข้อมูล"}),a.length>0&&(0,r.jsx)("p",{children:a[a.length-1]})]}),(0,r.jsx)("hr",{className:" opacity-20"}),(0,r.jsx)(d.A,{dataSource:f,columns:b,rowKey:"index",locale:{emptyText:(0,r.jsx)(o.A,{description:"ไม่พบข้อมูล"})},scroll:{x:800},size:"small",pagination:{pageSizeOptions:["5","10","20","50","100"],showSizeChanger:!0,defaultPageSize:10,showTotal:e=>"ทั้งหมด ".concat(e," รายการ")}})]})}},84109:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(19946).A)("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[586,3464,4396,592,437,9203,8441,1684,7358],()=>t(9099)),_N_E=e.O()}]);